<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Document</title>
</head>

<body>
    <p>
        实现红绿灯任务控制：红灯3s亮一次、绿灯1s亮一次、黄灯2s亮一次
    </p>
</body>
<script>
    function red() {
        console.log('red')
    }

    function green() {
        console.log('green')
    }

    function yellow() {
        console.log('yellow')
    }

    // 实现红绿灯任务控制：红灯3s亮一次、绿灯1s亮一次、黄灯2s亮一次
    function run(timer, light) {
        return new Promise((resolve, reject) => {
            setTimeout(() => {
                const mapFx = {
                    'red': red,
                    'green': green,
                    'yellow': yellow
                }
                mapFx[light]()
                resolve()
            }, timer)
        })
    }

    const step = async () => {
        await run(3000, 'red')
        await run(1000, 'green')
        await run(2000, 'yellow')
        step()
    }
    step();

</script>
</html>